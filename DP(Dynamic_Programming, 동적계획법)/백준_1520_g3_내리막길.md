# 1520 - ë‚´ë¦¬ë§‰ê¸¸



## ì•„ì´ë””ì–´

* bottom - top(ìƒí–¥ì‹)ìœ¼ë¡œ ë¬¸ì œë¥¼ ì ‘ê·¼í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œë¡œ, top - bottom(í•˜í–¥ì‹)ìœ¼ë¡œ ë¬¸ì œë¥¼ ì ‘ê·¼í•˜ë©´ ê°„ë‹¨í•˜ê²Œ í’€ ìˆ˜ ìˆëŠ” ë¬¸ì œì´ë‹¤.

* dfs ë¡œ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì—ì„œ memoizationì„ ì´ìš©í•´, ê°”ë˜ ê²½ë¡œë¥¼ ì €ì¥í•˜ê¸°.

* ì´ì°¨ì› ë°°ì—´ì—ì„œ ì¬ê·€(dfs í˜¹ì€ bfs)ì™€ ë™ë°˜ë˜ í™œìš©ë˜ëŠ” memoizationì€ ê° ë…¸ë“œ(ì¹¸)ë§ˆë‹¤ ë„ì°©ì§€ê¹Œì§€ ê°ˆ ìˆ˜ ìˆëŠ” ê²½ë¡œì˜ ê°¯ìˆ˜ë¥¼ ì €ì¥.



## ì½”ë“œ

### ì•„ë˜ì˜ ì½”ë“œ í˜•ì‹ì„ ì •ë¦¬

* ğŸ¶ base check

* ğŸ¶ memoi í™œìš© return - ğŸ¯ memo ë°°ì—´ì— ì €ì¥ëœ ê°’ return

* ğŸ¶ memoi ì—†ìŒ - íƒìƒ‰ return.
    - ğŸŒˆ dfs íƒìƒ‰ì„ 4ë°©í–¥ìœ¼ë¡œ í•´ì„œ í˜„ì¬ ë…¸ë“œì—ì„œì˜ ê²½ë¡œ ìˆ˜ êµ¬í•˜ê¸°
        - ğŸ³ dfs ê²°ê³¼ ì´ ê²½ë¡œ ìˆ˜ => result
    - ğŸŒˆ memo ë°°ì—´ì— resultê°’ ì €ì¥.
    - ğŸ¯ resultê°’(ë°©ê¸ˆ ê³„ì‚°ëœ ê²½ë¡œ ì´í•©)ì„ return.

```java
import java.io.*;
import java.util.*;


public class Main {
    static class Pair{
        int x, y;
        Pair(int x, int y){
            this.x = x;
            this.y = y;
        }
    }
    static int M, N;
    static int[][] arr;
    static long[][] memo;       // ê° ë…¸ë“œë§ˆë‹¤ ë„ì°©ì§€ê¹Œì§€ ê°ˆ ìˆ˜ ìˆëŠ” ê²½ë¡œì˜ ê°¯ìˆ˜.
    static int[] dx = {-1,1,0,0};
    static int[] dy = {0,0,-1,1};
    static long dfs(Pair p){
        // 1. base check - ë„ì°©ì§€ì ì—ì„œ ì¹´ìš´íŠ¸ ğŸ¶
        if(p.x == M-1 && p.y == N-1){
            return 1;  // ë„ì°©ì§€ì— ë„ì°©í• ì‹œ, í•­ìƒ í•˜ë‚˜ì˜ ê²½ë¡œë¡œ ë„ì°©í–ˆìœ¼ë¯€ë¡œ, 1ì˜ ê²½ë¡œìˆ˜ë¥¼ returní•œë‹¤.
        }
        // 2. memoi ë¥¼ í™œìš©í•˜ê¸°. ğŸ¶ - ì €ì¥ëœê°’ì´ ìˆë‹¤ë©´ ë°”ë¡œ returní•˜ì—¬ êº¼ë‚´ì£¼ê¸°.
        if(memo[p.x][p.y] != -1) return memo[p.x][p.y];     // ğŸ¯ ì €ì¥ëœ ê°’ì´ ìˆëŠ” ê²½ìš° return. ğŸ¯


        // 3. memo ì— ì €ì¥ëœ ê°’ì´ ì—†ëŠ” ê²½ìš°!! ğŸ¶ - recurrence

        // ì €ì¥ëœ ê°’ì´ ì—†ë‹¤ë©´!!!------------ ğŸŒˆ memoization ğŸŒˆ
        long result = 0; // ë³€ìˆ˜ë¥¼ í•˜ë‚˜ ë§Œë“¤ê³  --------------- ğŸ³ ì´ ë…¸ë“œ(ê°€ì§€)ì—ì„œ ê°ˆìˆ˜ ì‡ëŠ” ê²½ë¡œ íƒìƒ‰! ğŸ³

        for(int d = 0; d < 4; d++){ // ê²½ë¡œ íƒìƒ‰ ì‹œì‘
            int nx = p.x + dx[d];
            int ny = p.y + dy[d];

            if(nx < 0 || ny < 0 || nx >= M ||ny >= N) continue;
            if(arr[nx][ny] >= arr[p.x][p.y]) continue;

            // ì´ ë…¸ë“œ(ì¹¸)ì—ì„œ ê°ˆ ìˆ˜ ìˆëŠ” ê°€ì§€ë§ˆë‹¤, dfsíƒìƒ‰ì„ í–ˆì„ ì‹œ, ê°ˆ ìˆ˜ ìˆëŠ” ê²½ë¡œ ìˆ˜ë¥¼ ëª¨ë‘ ë”í•œë‹¤.
            result += dfs(new Pair(nx, ny));
        }
        //--------------------------------------------------ğŸ³ íƒìƒ‰ ì¢…ë£Œ -> ê²½ë¡œ ê°¯ìˆ˜ê°€ resultì— ì €ì¥.ğŸ³

        // ì´ ê°¯ìˆ˜ë¥¼ memoë°°ì—´ì— ì €ì¥í•´ë†“ê¸°.
        memo[p.x][p.y] = result;
        //------------------------------- ğŸŒˆ memoization ì™„ë£Œ. ğŸŒˆ

        return result;      // ğŸ¯ ì €ì¥ëœ ê°’ì´ ì—†ëŠ” ê²½ìš° return. ğŸ¯
    }

    public static void main(String[] args) throws IOException {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        StringTokenizer st = new StringTokenizer(br.readLine());

        M = Integer.parseInt(st.nextToken());
        N = Integer.parseInt(st.nextToken());
        arr = new int[M][N];
        memo = new long[M][N];

        for(int i =0 ; i < M; i++) Arrays.fill(memo[i], -1);

        for (int i = 0; i < M; i++) {
            st = new StringTokenizer(br.readLine());
            for (int j = 0; j < N; j++) {
                arr[i][j] = Integer.parseInt(st.nextToken());
            }
        }

        System.out.println(dfs(new Pair(0,0)));

    }
}


```